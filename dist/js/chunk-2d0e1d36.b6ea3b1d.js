(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1d36"],{"7ba6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{attrs:{md:"7"}},[r("b-card",{attrs:{title:"Yazar Listesi"}},[r("b-table-simple",{attrs:{borderless:"",responsive:!0,"table-class":"table-vertical-center"}},[r("b-thead",[r("b-tr",[r("b-th",[e._v("Yazar")]),r("b-th",[e._v("Açıklama")]),r("b-th",[e._v("İşlem")])],1)],1),r("b-tbody",[e._l(e.authors,(function(t,a){return[r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(t.fullName)+" ")]),r("b-td",[e._v(" "+e._s(t.description)+" ")]),r("b-td",[r("edit-author",{attrs:{"author-id":t.id},on:{refreshList:e.getAuthors}}),r("b-button",{staticClass:"btn-icon",attrs:{size:"xs",variant:"light-danger"},on:{click:function(r){return e.deleteAuthor(t.id)}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/General/Trash.svg"}})],1)])],1)],1)]}))],2)],1),r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.pageSize,"aria-controls":"my-table"},model:{value:e.pageNumber,callback:function(t){e.pageNumber=t},expression:"pageNumber"}})],1)],1),r("b-col",{attrs:{md:"5"}},[r("form-wrapper",{attrs:{validator:e.$v.createForm}},[r("b-card",{attrs:{title:"Yazar Ekle"}},[r("b-row",[r("form-group",{attrs:{name:"fullName",xs:"12",label:"Yazar Adı"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.createForm.fullName,callback:function(t){e.$set(e.createForm,"fullName",t)},expression:"createForm.fullName"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"description",xs:"12",label:"Açıklama"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.createForm.description,callback:function(t){e.$set(e.createForm,"description",t)},expression:"createForm.description"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("b-col",[r("b-button",{on:{click:e.addAuthor}},[e._v("Ekle")])],1)],1)],1)],1)],1)],1)},n=[],o=r("5530"),s=(r("96cf"),r("1da1")),i=r("0bce"),u=r("b5ae"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline"}},[r("b-button",{staticClass:"btn-icon mr-2",attrs:{size:"xs",variant:"light-primary"},on:{click:function(t){e.modal=!0}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/Design/Edit.svg"}})],1)]),r("b-modal",{attrs:{title:e.$t("common.edit"),size:"md","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.onClose},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("form-wrapper",{staticClass:"av-tooltip tooltip-right-top",attrs:{validator:e.$v.form}},[r("b-row",[r("form-group",{attrs:{name:"fullName",xs:"12",label:"Yazar Adı"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.fullName,callback:function(t){e.$set(e.form,"fullName",t)},expression:"form.fullName"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"description",xs:"12",label:"Açıklama"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}},"b-input",a,!1),n))}}])})],1)],1),r("template",{slot:"modal-footer"},[r("b-button",{attrs:{variant:"light"},on:{click:e.onClose}},[e._v(e._s(e.$t("common.cancel")))]),r("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:e.$v.$anyError||e.saved},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.save")))])],1)],2)],1)},l=[],m={props:["authorId"],validations:{form:{fullName:{required:u["required"]},description:{}}},data:function(){return{modal:!1,countries:[],form:{fullName:"",description:""},saved:!0}},methods:{onClose:function(e){var t=this;e.preventDefault(),this.saved?this.modal=!1:this.confirmChanges().then((function(e){e.value?t.submitForm():t.modal=!1}))},getAuthor:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/authors/"+e.authorId);case 3:r=t.sent,a=r.data,e.form=a,setTimeout((function(){e.saved=!0}),200),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},submitForm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.$touch(),!e.$v.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.patch("admin/authors/"+e.authorId,e.form);case 7:e.$emit("refreshList"),e.saved=!0,e.modal=!1,e.toast({message:"updateSuccess",item:"author"}),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"updateError",item:"author"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},watch:{modal:function(e){e&&(this.getAuthor(),this.$v.$reset())},form:{handler:function(){this.saved=!1},deep:!0}}},d=m,p=r("2877"),b=Object(p["a"])(d,c,l,!1,null,null,null),f=b.exports,h={components:{EditAuthor:f},validations:{createForm:{fullName:{required:u["required"]}}},data:function(){return{createForm:{fullName:"",description:""},authors:[],pageSize:10,pageNumber:1,totalRows:null}},mounted:function(){this.$store.dispatch(i["a"],[{title:"Yönetim Paneli"},{title:"Yazar İşlemleri"}]),this.getAuthors()},methods:{getAuthors:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/authors",{params:Object(o["a"])({},e.requestQuery)});case 3:r=t.sent,a=r.data,e.authors=a.rows,e.totalRows=a.count,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteAuthor:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.confirmDelete();case 3:if(a=r.sent,n=a.isConfirmed,n){r.next=7;break}return r.abrupt("return",!1);case 7:return r.next=9,t.axios.delete("admin/authors/"+e);case 9:t.toast({message:"deleteSuccess",item:"author"}),t.getAuthors(),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.toast({type:"danger",message:"deleteError",item:"author"}),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addAuthor:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.createForm.$touch(),!e.$v.createForm.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.post("admin/authors",e.createForm);case 7:e.createForm={fullName:"",description:""},e.$v.createForm.$reset(),e.toast({message:"createSuccess",item:"author"}),e.getAuthors(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"createError",item:"author"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},computed:{requestQuery:function(){return{pageSize:this.pageSize,pageNumber:this.pageNumber}}},watch:{requestQuery:function(){this.getAuthors()}}},v=h,g=Object(p["a"])(v,a,n,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0e1d36.b6ea3b1d.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221f17"],{cd00:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{attrs:{md:"7"}},[r("b-card",{attrs:{title:"Kategori Listesi"}},[r("b-table-simple",{attrs:{borderless:"",responsive:!0,"table-class":"table-vertical-center"}},[r("b-thead",[r("b-tr",[r("b-th",[e._v("Kategori")]),r("b-th",[e._v("İşlem")])],1)],1),r("b-tbody",[e._l(e.categories,(function(t,a){return[r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(t.name)+" ")]),r("b-td",[r("edit-category",{attrs:{"category-id":t.id},on:{refreshList:e.getCategories}}),r("b-button",{staticClass:"btn-icon",attrs:{size:"xs",variant:"light-danger"},on:{click:function(r){return e.deleteCategory(t.id)}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/General/Trash.svg"}})],1)])],1)],1)]}))],2)],1),r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.pageSize,"aria-controls":"my-table"},model:{value:e.pageNumber,callback:function(t){e.pageNumber=t},expression:"pageNumber"}})],1)],1),r("b-col",{attrs:{md:"5"}},[r("form-wrapper",{attrs:{validator:e.$v.createForm}},[r("b-card",{attrs:{title:"Kategori Ekle"}},[r("b-row",[r("form-group",{attrs:{name:"name",xs:"12",label:"Kategori Adı"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("b-col",[r("b-button",{on:{click:e.addCategory}},[e._v("Ekle")])],1)],1)],1)],1)],1)],1)},n=[],o=r("5530"),s=(r("96cf"),r("1da1")),i=r("0bce"),c=r("b5ae"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline"}},[r("b-button",{staticClass:"btn-icon mr-2",attrs:{size:"xs",variant:"light-primary"},on:{click:function(t){e.modal=!0}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/Design/Edit.svg"}})],1)]),r("b-modal",{attrs:{title:e.$t("common.edit"),size:"md","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.onClose},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("form-wrapper",{staticClass:"av-tooltip tooltip-right-top",attrs:{validator:e.$v.form}},[r("b-row",[r("form-group",{attrs:{name:"name",xs:"12",label:"Kategori Adı"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},"b-input",a,!1),n))}}])})],1)],1),r("template",{slot:"modal-footer"},[r("b-button",{attrs:{variant:"light"},on:{click:e.onClose}},[e._v(e._s(e.$t("common.cancel")))]),r("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:e.$v.$anyError||e.saved},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.save")))])],1)],2)],1)},u=[],m={props:["categoryId"],validations:{form:{name:{required:c["required"]}}},data:function(){return{modal:!1,countries:[],form:{name:""},saved:!0}},methods:{onClose:function(e){var t=this;e.preventDefault(),this.saved?this.modal=!1:this.confirmChanges().then((function(e){e.value?t.submitForm():t.modal=!1}))},getCategory:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/categories/"+e.categoryId);case 3:r=t.sent,a=r.data,e.form=a,setTimeout((function(){e.saved=!0}),200),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},submitForm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.$touch(),!e.$v.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.patch("admin/categories/"+e.categoryId,e.form);case 7:e.$emit("refreshList"),e.saved=!0,e.modal=!1,e.toast({message:"updateSuccess",item:"category"}),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"updateError",item:"category"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},watch:{modal:function(e){e&&(this.getCategory(),this.$v.$reset())},form:{handler:function(){this.saved=!1},deep:!0}}},d=m,g=r("2877"),p=Object(g["a"])(d,l,u,!1,null,null,null),b=p.exports,v={components:{EditCategory:b},validations:{createForm:{name:{required:c["required"]}}},data:function(){return{createForm:{name:""},categories:[],pageSize:10,pageNumber:1,totalRows:null}},mounted:function(){this.$store.dispatch(i["a"],[{title:"Yönetim Paneli"},{title:"Kategori İşlemleri"}]),this.getCategories()},methods:{getCategories:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/categories",{params:Object(o["a"])({},e.requestQuery)});case 3:r=t.sent,a=r.data,e.categories=a.rows,e.totalRows=a.count,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteCategory:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.confirmDelete();case 3:if(a=r.sent,n=a.isConfirmed,n){r.next=7;break}return r.abrupt("return",!1);case 7:return r.next=9,t.axios.delete("admin/categories/"+e);case 9:t.toast({message:"deleteSuccess",item:"category"}),t.getCategories(),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.toast({type:"danger",message:"deleteError",item:"category"}),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addCategory:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.createForm.$touch(),!e.$v.createForm.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.post("admin/categories",e.createForm);case 7:e.createForm={name:""},e.$v.createForm.$reset(),e.toast({message:"createSuccess",item:"category"}),e.getCategories(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"createError",item:"category"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},computed:{requestQuery:function(){return{pageSize:this.pageSize,pageNumber:this.pageNumber}}},watch:{requestQuery:function(){this.getCategories()}}},f=v,h=Object(g["a"])(f,a,n,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d221f17.97b75529.js.map
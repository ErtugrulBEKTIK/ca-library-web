(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba2ee"],{"35b8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-row",[r("b-col",{attrs:{md:"8"}},[e.currentUser.roleId===e.Roles.ADMIN?r("b-card",{staticClass:"mb-4",attrs:{title:"Yönetim Listesi"}},[r("b-table-simple",{attrs:{borderless:"",responsive:!0,"table-class":"table-vertical-center"}},[r("b-thead",[r("b-tr",[r("b-th",[e._v("User")]),r("b-th",[e._v("Email")]),r("b-th",[e._v("Role")]),r("b-th",[e._v("İşlem")])],1)],1),r("b-tbody",[e._l(e.admins,(function(t,a){return[r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(t.fullName)+" ")]),r("b-td",[e._v(" "+e._s(t.email)+" ")]),r("b-td",[e._v(" "+e._s(t.role)+" ")]),r("b-td",[r("edit-user",{attrs:{"user-id":t.id},on:{refreshList:e.getData}}),r("b-button",{staticClass:"btn-icon",attrs:{size:"xs",variant:"light-danger"},on:{click:function(r){return e.deleteUser(t.id)}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/General/Trash.svg"}})],1)])],1)],1)]}))],2)],1)],1):e._e(),r("b-card",{attrs:{title:"Kullanıcı Listesi"}},[r("b-table-simple",{attrs:{borderless:"",responsive:!0,"table-class":"table-vertical-center"}},[r("b-thead",[r("b-tr",[r("b-th",[e._v("User")]),r("b-th",[e._v("Email")]),r("b-th",[e._v("İşlem")])],1)],1),r("b-tbody",[e._l(e.users,(function(t,a){return[r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(t.fullName)+" ")]),r("b-td",[e._v(" "+e._s(t.email)+" ")]),r("b-td",[r("edit-user",{attrs:{"user-id":t.id},on:{refreshList:e.getData}}),r("b-button",{staticClass:"btn-icon",attrs:{size:"xs",variant:"light-danger"},on:{click:function(r){return e.deleteUser(t.id)}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/General/Trash.svg"}})],1)])],1)],1)]}))],2)],1),r("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.pageSize,"aria-controls":"my-table"},model:{value:e.pageNumber,callback:function(t){e.pageNumber=t},expression:"pageNumber"}})],1)],1),r("b-col",{attrs:{md:"4"}},[r("form-wrapper",{attrs:{validator:e.$v.createForm}},[r("b-card",{attrs:{title:"Kullanıcı Ekle"}},[r("b-row",[r("form-group",{attrs:{name:"firstName",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({attrs:{placeholder:"Ad"},model:{value:e.createForm.firstName,callback:function(t){e.$set(e.createForm,"firstName",t)},expression:"createForm.firstName"}},"b-input",a,!1),s))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"lastName",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({attrs:{placeholder:"Soyad"},model:{value:e.createForm.lastName,callback:function(t){e.$set(e.createForm,"lastName",t)},expression:"createForm.lastName"}},"b-input",a,!1),s))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"email",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({attrs:{placeholder:"Email"},model:{value:e.createForm.email,callback:function(t){e.$set(e.createForm,"email",t)},expression:"createForm.email"}},"b-input",a,!1),s))}}])})],1),e.currentUser.roleId===e.Roles.ADMIN?r("b-row",[r("form-group",{attrs:{name:"roleId",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-select",e._g(e._b({model:{value:e.createForm.roleId,callback:function(t){e.$set(e.createForm,"roleId",t)},expression:"createForm.roleId"}},"b-select",a,!1),s),[r("b-select-option",{attrs:{value:"1"}},[e._v("Admin")]),r("b-select-option",{attrs:{value:"2"}},[e._v("Editor")]),r("b-select-option",{attrs:{value:"3"}},[e._v("Basic User")])],1)}}],null,!1,2738149235)})],1):e._e(),r("b-row",[r("form-group",{attrs:{name:"password",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({attrs:{placeholder:"Şifre",type:"password"},model:{value:e.createForm.password,callback:function(t){e.$set(e.createForm,"password",t)},expression:"createForm.password"}},"b-input",a,!1),s))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"rePassword",xs:"12","no-label":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({attrs:{placeholder:"Şifre Tekrar",type:"password"},model:{value:e.createForm.rePassword,callback:function(t){e.$set(e.createForm,"rePassword",t)},expression:"createForm.rePassword"}},"b-input",a,!1),s))}}])})],1),r("b-row",[r("b-col",[r("b-button",{on:{click:e.addUser}},[e._v("Ekle")])],1)],1)],1)],1)],1)],1)},s=[],n=r("5530"),o=(r("96cf"),r("1da1")),i=r("0bce"),l=r("b5ae"),c=r("429a"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline"}},[r("b-button",{staticClass:"btn-icon mr-2",attrs:{size:"xs",variant:"light-primary"},on:{click:function(t){e.modal=!0}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/Design/Edit.svg"}})],1)]),r("b-modal",{attrs:{title:e.$t("common.edit"),size:"md","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.onClose},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("form-wrapper",{staticClass:"av-tooltip tooltip-right-top",attrs:{validator:e.$v.form}},[r("b-row",[r("form-group",{attrs:{name:"firstName",xs:"12",label:"Ad"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}},"b-input",a,!1),s))}}])}),r("form-group",{attrs:{name:"lastName",xs:"12",label:"Soyad"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}},"b-input",a,!1),s))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"email",xs:"12",label:"Email"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-input",e._g(e._b({model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},"b-input",a,!1),s))}}])}),e.currentUser.roleId===e.Roles.ADMIN?r("form-group",{attrs:{name:"roleId",xs:"12",label:"Role"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,s=t.listeners;return r("b-select",e._g(e._b({model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},"b-select",a,!1),s),[r("b-select-option",{attrs:{value:"1"}},[e._v("Admin")]),r("b-select-option",{attrs:{value:"2"}},[e._v("Editor")]),r("b-select-option",{attrs:{value:"3"}},[e._v("Basic User")])],1)}}],null,!1,3908022167)}):e._e()],1)],1),r("template",{slot:"modal-footer"},[r("b-button",{attrs:{variant:"light"},on:{click:e.onClose}},[e._v(e._s(e.$t("common.cancel")))]),r("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:e.$v.$anyError||e.saved},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.save")))])],1)],2)],1)},m=[],d=r("2f62"),b={props:["userId"],validations:{form:{firstName:{required:l["required"]},lastName:{required:l["required"]},email:{required:l["required"],email:l["email"]},description:{}}},data:function(){return{Roles:c["c"],modal:!1,countries:[],form:{firstName:"",lastName:"",email:"",roleId:null},saved:!0}},methods:{onClose:function(e){var t=this;e.preventDefault(),this.saved?this.modal=!1:this.confirmChanges().then((function(e){e.value?t.submitForm():t.modal=!1}))},getUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/users/"+e.userId);case 3:r=t.sent,a=r.data,e.form=a,setTimeout((function(){e.saved=!0}),200),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},submitForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.$touch(),!e.$v.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.patch("admin/users/"+e.userId,e.form);case 7:e.$emit("refreshList"),e.saved=!0,e.modal=!1,e.toast({message:"updateSuccess",item:"user"}),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"updateError",item:"user"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},computed:Object(n["a"])({},Object(d["b"])(["currentUser"])),watch:{modal:function(e){e&&(this.getUser(),this.$v.$reset())},form:{handler:function(){this.saved=!1},deep:!0}}},p=b,f=r("2877"),v=Object(f["a"])(p,u,m,!1,null,null,null),g=v.exports,h={components:{EditUser:g},validations:{createForm:{firstName:{required:l["required"]},lastName:{required:l["required"]},email:{required:l["required"],email:l["email"]},password:{required:l["required"],minLength:Object(l["minLength"])(6)},rePassword:{sameAs:Object(l["sameAs"])("password")}}},data:function(){return{Roles:c["c"],createForm:{firstName:"",lastName:"",email:"",roleId:c["c"].BASIC_USER,password:"",rePassword:""},admins:[],users:[],pageSize:10,pageNumber:1,totalRows:null}},mounted:function(){this.$store.dispatch(i["a"],[{title:"Yönetim Paneli"},{title:"Kullanıcı İşlemleri"}]),this.getData()},methods:{getData:function(){this.getUsers(),this.getAdmins()},getAdmins:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/admin-list");case 3:r=t.sent,a=r.data,e.admins=a,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("admin/users",{params:Object(n["a"])({},e.requestQuery)});case 3:r=t.sent,a=r.data,e.users=a.rows,e.totalRows=a.count,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteUser:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.confirmDelete();case 3:if(a=r.sent,s=a.isConfirmed,s){r.next=7;break}return r.abrupt("return",!1);case 7:return r.next=9,t.axios.delete("admin/users/"+e);case 9:t.toast({message:"deleteSuccess",item:"user"}),t.getData(),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),t.toast({type:"danger",message:"deleteError",item:"user"}),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.createForm.$touch(),!e.$v.createForm.$anyError){t.next=5;break}return e.toast({type:"danger",message:"validationError"}),t.abrupt("return",!1);case 5:return t.next=7,e.axios.post("admin/users",e.createForm);case 7:e.createForm={firstName:"",lastName:"",email:"",roleId:2,password:"",rePassword:""},e.$v.createForm.$reset(),e.toast({message:"createSuccess",item:"user"}),e.getData(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toast({type:"danger",message:"createError",item:"user"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},computed:Object(n["a"])(Object(n["a"])({},Object(d["b"])(["currentUser"])),{},{requestQuery:function(){return{pageSize:this.pageSize,pageNumber:this.pageNumber}}}),watch:{requestQuery:function(){this.getUsers()}}},_=h,w=Object(f["a"])(_,a,s,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0ba2ee.cffafb45.js.map
{"version":3,"sources":["webpack:///./src/view/pages/admin/category/CategoryList.vue?771a","webpack:///./src/view/pages/admin/category/EditCategory.vue?69d0","webpack:///src/view/pages/admin/category/EditCategory.vue","webpack:///./src/view/pages/admin/category/EditCategory.vue?11c3","webpack:///./src/view/pages/admin/category/EditCategory.vue","webpack:///src/view/pages/admin/category/CategoryList.vue","webpack:///./src/view/pages/admin/category/CategoryList.vue?6a2c","webpack:///./src/view/pages/admin/category/CategoryList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$t","_v","_s","loading","_e","_l","item","i","key","name","id","on","getCategories","staticClass","$event","deleteCategory","categories","length","pageSize","totalRows","model","value","callback","$$v","pageNumber","expression","$v","createForm","scopedSlots","_u","fn","ref","listeners","_g","_b","$set","addCategory","staticRenderFns","staticStyle","modal","onClose","form","slot","$anyError","saved","submitting","submitForm","props","validations","data","countries","methods","bvModalEvt","preventDefault","confirmChanges","then","result","watch","nv","getCategory","$reset","handler","deep","component","components","EditCategory","mounted","$store","dispatch","computed","requestQuery"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,GAAK,MAAM,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQN,EAAIO,GAAG,0BAA0B,CAACH,EAAG,iBAAiB,CAACE,MAAM,CAAC,WAAa,GAAG,YAAa,EAAK,cAAc,0BAA0B,CAACF,EAAG,UAAU,CAACA,EAAG,OAAO,CAACA,EAAG,OAAO,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIO,GAAG,wBAAwBH,EAAG,OAAO,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIO,GAAG,4BAA4B,IAAI,GAAGH,EAAG,UAAU,CAAGJ,EAAIU,QAAgfV,EAAIW,KAA3eX,EAAIY,GAAIZ,EAAc,YAAE,SAASa,EAAKC,GAAG,OAAOV,EAAG,OAAO,CAACW,IAAID,GAAG,CAACV,EAAG,OAAO,CAACJ,EAAIQ,GAAG,IAAIR,EAAIS,GAAGI,EAAKG,MAAM,OAAOZ,EAAG,OAAO,CAACA,EAAG,gBAAgB,CAACE,MAAM,CAAC,cAAcO,EAAKI,IAAIC,GAAG,CAAC,YAAclB,EAAImB,iBAAiBf,EAAG,WAAW,CAACgB,YAAY,WAAWd,MAAM,CAAC,KAAO,KAAK,QAAU,gBAAgBY,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOrB,EAAIsB,eAAeT,EAAKI,OAAO,CAACb,EAAG,OAAO,CAACgB,YAAY,YAAY,CAAChB,EAAG,aAAa,CAACE,MAAM,CAAC,IAAM,yCAAyC,MAAM,IAAI,MAAyC,IAA1BN,EAAIuB,WAAWC,QAAiBxB,EAAIU,QAA8HV,EAAIW,KAAzHP,EAAG,KAAK,CAACgB,YAAY,eAAe,CAAChB,EAAG,KAAK,CAACE,MAAM,CAAC,QAAU,MAAM,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIO,GAAG,0BAAoCP,EAAW,QAAEI,EAAG,KAAK,CAACgB,YAAY,eAAe,CAAChB,EAAG,KAAK,CAACE,MAAM,CAAC,QAAU,MAAM,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,QAAU,cAAc,KAAKN,EAAIW,MAAM,IAAI,GAAIX,EAAIyB,SAAWzB,EAAI0B,UAAWtB,EAAG,eAAe,CAACE,MAAM,CAAC,aAAaN,EAAI0B,UAAU,WAAW1B,EAAIyB,UAAUE,MAAM,CAACC,MAAO5B,EAAc,WAAE6B,SAAS,SAAUC,GAAM9B,EAAI+B,WAAWD,GAAKE,WAAW,gBAAgBhC,EAAIW,MAAM,IAAI,GAAGP,EAAG,QAAQ,CAACE,MAAM,CAAC,GAAK,MAAM,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,UAAYN,EAAIiC,GAAGC,aAAa,CAAC9B,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQN,EAAIO,GAAG,yBAAyB,CAACH,EAAG,QAAQ,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,OAAO,GAAK,KAAK,MAAQN,EAAIO,GAAG,yBAAyB4B,YAAYnC,EAAIoC,GAAG,CAAC,CAACrB,IAAI,UAAUsB,GAAG,SAASC,GACpyD,IAAIhC,EAAQgC,EAAIhC,MACZiC,EAAYD,EAAIC,UACpB,OAAOnC,EAAG,UAAUJ,EAAIwC,GAAGxC,EAAIyC,GAAG,CAACd,MAAM,CAACC,MAAO5B,EAAIkC,WAAe,KAAEL,SAAS,SAAUC,GAAM9B,EAAI0C,KAAK1C,EAAIkC,WAAY,OAAQJ,IAAME,WAAW,oBAAoB,UAAU1B,GAAM,GAAOiC,WAAmB,GAAGnC,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,WAAW,CAACc,GAAG,CAAC,MAAQlB,EAAI2C,cAAc,CAAC3C,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIO,GAAG,oBAAoB,IAAI,IAAI,IAAI,IAAI,IAAI,IACjVqC,EAAkB,G,4DCJlB,EAAS,WAAa,IAAI5C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACyC,YAAY,CAAC,QAAU,WAAW,CAACzC,EAAG,WAAW,CAACgB,YAAY,gBAAgBd,MAAM,CAAC,KAAO,KAAK,QAAU,iBAAiBY,GAAG,CAAC,MAAQ,SAASG,GAAQrB,EAAI8C,OAAQ,KAAQ,CAAC1C,EAAG,OAAO,CAACgB,YAAY,YAAY,CAAChB,EAAG,aAAa,CAACE,MAAM,CAAC,IAAM,uCAAuC,KAAKF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQN,EAAIO,GAAG,gBAAgB,KAAO,KAAK,kBAAkB,GAAG,uBAAuB,IAAIW,GAAG,CAAC,MAAQlB,EAAI+C,SAASpB,MAAM,CAACC,MAAO5B,EAAS,MAAE6B,SAAS,SAAUC,GAAM9B,EAAI8C,MAAMhB,GAAKE,WAAW,UAAU,CAAGhC,EAAIU,QAGpZV,EAAIW,KAHyZP,EAAG,eAAe,CAACgB,YAAY,+BAA+Bd,MAAM,CAAC,UAAYN,EAAIiC,GAAGe,OAAO,CAAC5C,EAAG,QAAQ,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,OAAO,GAAK,KAAK,MAAQN,EAAIO,GAAG,yBAAyB4B,YAAYnC,EAAIoC,GAAG,CAAC,CAACrB,IAAI,UAAUsB,GAAG,SAASC,GACx2B,IAAIhC,EAAQgC,EAAIhC,MACZiC,EAAYD,EAAIC,UACpB,OAAOnC,EAAG,UAAUJ,EAAIwC,GAAGxC,EAAIyC,GAAG,CAACd,MAAM,CAACC,MAAO5B,EAAIgD,KAAS,KAAEnB,SAAS,SAAUC,GAAM9B,EAAI0C,KAAK1C,EAAIgD,KAAM,OAAQlB,IAAME,WAAW,cAAc,UAAU1B,GAAM,GAAOiC,OAAe,MAAK,EAAM,aAAa,IAAI,GAAavC,EAAW,QAAEI,EAAG,MAAM,CAACgB,YAAY,eAAe,CAAChB,EAAG,YAAY,CAACE,MAAM,CAAC,QAAU,cAAc,GAAGN,EAAIW,KAAKP,EAAG,WAAW,CAAC6C,KAAK,gBAAgB,CAAC7C,EAAG,WAAW,CAACE,MAAM,CAAC,QAAU,SAASY,GAAG,CAAC,MAAQlB,EAAI+C,UAAU,CAAC/C,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIO,GAAG,kBAAkB,OAAOH,EAAG,WAAW,CAACgB,YAAY,OAAOd,MAAM,CAAC,QAAU,UAAU,SAAWN,EAAIiC,GAAGiB,WAAalD,EAAImD,OAASnD,EAAIoD,YAAYlC,GAAG,CAAC,MAAQlB,EAAIqD,aAAa,CAACrD,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIO,GAAG,gBAAgB,KAAMP,EAAc,WAAEI,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,MAAMN,EAAIW,MAAM,IAAI,IAAI,IAAI,IACxvB,EAAkB,GCiDtB,GACE2C,MAAO,CAAC,cACRC,YAAa,CACXP,KAAM,CACJhC,KAAM,CAAZ,0BAGEwC,KAPF,WAQI,MAAO,CACLV,OAAO,EACPW,UAAW,GACXT,KAAM,CACJhC,KAAM,IAERN,SAAS,EACT0C,YAAY,EACZD,OAAO,IAGXO,QAAS,CACPX,QADJ,SACA,cACMY,EAAWC,iBACP3D,KAAKkD,MACPlD,KAAK6C,OAAQ,EAEb7C,KAAK4D,iBAAiBC,MAAK,SAAnC,GACcC,EAAOnC,MACT,EAAZ,aAEY,EAAZ,aAKI,YAfJ,WAeA,gLAEA,aAFA,SAGA,YACA,kCAJA,gBAGA,EAHA,EAGA,KAGA,SACA,uBACA,aACA,KATA,qDAWA,kBAXA,yBAaA,aAbA,gFAgBI,WA/BJ,WA+BA,oKAEA,gBACA,eACA,eAJA,uBAKA,mDALA,mBAMA,GANA,uBASA,cACA,iCACA,QAXA,OAaA,uBACA,WACA,WAEA,mDAjBA,qDAmBA,+DACA,kBApBA,yBAsBA,gBAtBA,iFA0BEoC,MAAO,CACLlB,MADJ,SACA,GACUmB,IACFhE,KAAKiE,cACLjE,KAAKgC,GAAGkC,WAGZnB,KAAM,CACJoB,QADN,WAEQnE,KAAKkD,OAAQ,GAEfkB,MAAM,KC5IuX,I,YCO/XC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCkEf,GACEC,WAAY,CACVC,aAAJ,GAEEjB,YAAa,CACXrB,WAAY,CACVlB,KAAM,CAAZ,0BAGEwC,KATF,WAUI,MAAO,CACLtB,WAAY,CACVlB,KAAM,IAERO,WAAY,GACZb,SAAS,EACTe,SAAU,GACVM,WAAY,EACZL,UAAW,OAGf+C,QArBF,WAsBIxE,KAAKyE,OAAOC,SAAS,EAAzB,MACA,CAAM,MAAN,sBACA,CAAM,MAAN,kCAGI1E,KAAKkB,iBAEPuC,QAAS,CACP,cADJ,WACA,gLAEA,aAFA,SAGA,gCACA,2CAJA,gBAGA,EAHA,EAGA,KAGA,oBACA,oBAPA,qDASA,kBATA,yBAWA,aAXA,gFAeI,eAhBJ,SAgBA,4LAEA,kBAFA,mBAEA,EAFA,EAEA,YAEA,EAJA,0CAIA,GAJA,uBAMA,sCANA,OAOA,mDACA,kBARA,qDAUA,+DACA,kBAXA,6DAeI,YA/BJ,WA+BA,oKAEA,0BACA,0BAHA,uBAIA,mDAJA,mBAKA,GALA,uBAOA,8CAPA,OASA,cACA,SAEA,yBAEA,mDACA,kBAfA,qDAiBA,+DACA,kBAlBA,8DAsBEkB,SAAU,CACRC,aADJ,WAEM,MAAO,CACLpD,SAAUxB,KAAKwB,SACfM,WAAY9B,KAAK8B,cAIvBiC,MAAO,CACLa,aADJ,WAEM5E,KAAKkB,mBChLwX,ICO/X,EAAY,eACd,EACApB,EACA6C,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d221f17.d4b227a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',[_c('b-col',{attrs:{\"md\":\"7\"}},[_c('b-card',{attrs:{\"title\":_vm.$t('project.categoryList')}},[_c('b-table-simple',{attrs:{\"borderless\":\"\",\"responsive\":true,\"table-class\":\"table-vertical-center\"}},[_c('b-thead',[_c('b-tr',[_c('b-th',[_vm._v(_vm._s(_vm.$t('project.category')))]),_c('b-th',[_vm._v(_vm._s(_vm.$t('project.transaction')))])],1)],1),_c('b-tbody',[(!_vm.loading)?_vm._l((_vm.categories),function(item,i){return _c('b-tr',{key:i},[_c('b-td',[_vm._v(\" \"+_vm._s(item.name)+\" \")]),_c('b-td',[_c('edit-category',{attrs:{\"category-id\":item.id},on:{\"refreshList\":_vm.getCategories}}),_c('b-button',{staticClass:\"btn-icon\",attrs:{\"size\":\"xs\",\"variant\":\"light-danger\"},on:{\"click\":function($event){return _vm.deleteCategory(item.id)}}},[_c('span',{staticClass:\"svg-icon\"},[_c('inline-svg',{attrs:{\"src\":\"/media/svg/icons/General/Trash.svg\"}})],1)])],1)],1)}):_vm._e(),(_vm.categories.length === 0 && !_vm.loading)?_c('tr',{staticClass:\"text-center\"},[_c('td',{attrs:{\"colspan\":\"2\"}},[_vm._v(_vm._s(_vm.$t('project.noRecord')))])]):_vm._e(),(_vm.loading)?_c('tr',{staticClass:\"text-center\"},[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('b-spinner',{attrs:{\"variant\":\"primary\"}})],1)]):_vm._e()],2)],1),(_vm.pageSize < _vm.totalRows)?_c('b-pagination',{attrs:{\"total-rows\":_vm.totalRows,\"per-page\":_vm.pageSize},model:{value:(_vm.pageNumber),callback:function ($$v) {_vm.pageNumber=$$v},expression:\"pageNumber\"}}):_vm._e()],1)],1),_c('b-col',{attrs:{\"md\":\"5\"}},[_c('form-wrapper',{attrs:{\"validator\":_vm.$v.createForm}},[_c('b-card',{attrs:{\"title\":_vm.$t('project.addCategory')}},[_c('b-row',[_c('form-group',{attrs:{\"name\":\"name\",\"xs\":\"12\",\"label\":_vm.$t('project.categoryName')},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nvar listeners = ref.listeners;\nreturn _c('b-input',_vm._g(_vm._b({model:{value:(_vm.createForm.name),callback:function ($$v) {_vm.$set(_vm.createForm, \"name\", $$v)},expression:\"createForm.name\"}},'b-input',attrs,false),listeners))}}])})],1),_c('b-row',[_c('b-col',[_c('b-button',{on:{\"click\":_vm.addCategory}},[_vm._v(_vm._s(_vm.$t('project.add')))])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline\"}},[_c('b-button',{staticClass:\"btn-icon mr-2\",attrs:{\"size\":\"xs\",\"variant\":\"light-primary\"},on:{\"click\":function($event){_vm.modal = true}}},[_c('span',{staticClass:\"svg-icon\"},[_c('inline-svg',{attrs:{\"src\":\"/media/svg/icons/Design/Edit.svg\"}})],1)]),_c('b-modal',{attrs:{\"title\":_vm.$t('project.edit'),\"size\":\"md\",\"no-close-on-esc\":\"\",\"no-close-on-backdrop\":\"\"},on:{\"close\":_vm.onClose},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[(!_vm.loading)?_c('form-wrapper',{staticClass:\"av-tooltip tooltip-right-top\",attrs:{\"validator\":_vm.$v.form}},[_c('b-row',[_c('form-group',{attrs:{\"name\":\"name\",\"xs\":\"12\",\"label\":_vm.$t('project.categoryName')},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nvar listeners = ref.listeners;\nreturn _c('b-input',_vm._g(_vm._b({model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}},'b-input',attrs,false),listeners))}}],null,false,69830842)})],1)],1):_vm._e(),(_vm.loading)?_c('div',{staticClass:\"text-center\"},[_c('b-spinner',{attrs:{\"variant\":\"primary\"}})],1):_vm._e(),_c('template',{slot:\"modal-footer\"},[_c('b-button',{attrs:{\"variant\":\"light\"},on:{\"click\":_vm.onClose}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.cancel\"))+\" \")]),_c('b-button',{staticClass:\"mr-1\",attrs:{\"variant\":\"primary\",\"disabled\":_vm.$v.$anyError || _vm.saved || _vm.submitting},on:{\"click\":_vm.submitForm}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.save\"))+\" \"),(_vm.submitting)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e()],1)],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"display: inline\">\n    <b-button\n      size=\"xs\"\n      variant=\"light-primary\"\n      class=\"btn-icon mr-2\"\n      @click=\"modal = true\"\n    >\n      <span class=\"svg-icon\">\n        <inline-svg src=\"/media/svg/icons/Design/Edit.svg\" />\n      </span>\n    </b-button>\n    <b-modal\n      v-model=\"modal\"\n      @close=\"onClose\"\n      :title=\"$t('project.edit')\"\n      size=\"md\"\n      no-close-on-esc\n      no-close-on-backdrop\n    >\n      <form-wrapper :validator=\"$v.form\" v-if=\"!loading\" class=\"av-tooltip tooltip-right-top\">\n        <b-row>\n          <form-group name=\"name\" xs=\"12\" :label=\"$t('project.categoryName')\">\n            <b-input\n              slot-scope=\"{ attrs, listeners }\"\n              v-bind=\"attrs\"\n              v-on=\"listeners\"\n              v-model=\"form.name\"\n            />\n          </form-group>\n        </b-row>\n      </form-wrapper>\n      <div class=\"text-center\" v-if=\"loading\">\n        <b-spinner variant=\"primary\" />\n      </div>\n      <template slot=\"modal-footer\">\n        <b-button variant=\"light\" @click=\"onClose\">\n          {{ $t(\"common.cancel\") }}\n        </b-button>\n        <b-button\n          variant=\"primary\"\n          @click=\"submitForm\"\n          :disabled=\"$v.$anyError || saved || submitting\"\n          class=\"mr-1\">\n          {{ $t(\"common.save\") }} <b-spinner small v-if=\"submitting\" />\n        </b-button>\n      </template>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport { required } from \"vuelidate/lib/validators\";\nexport default {\n  props: [\"categoryId\"],\n  validations: {\n    form: {\n      name: { required },\n    },\n  },\n  data() {\n    return {\n      modal: false,\n      countries: [],\n      form: {\n        name: \"\",\n      },\n      loading: true,\n      submitting: false,\n      saved: true,\n    };\n  },\n  methods: {\n    onClose(bvModalEvt) {\n      bvModalEvt.preventDefault();\n      if (this.saved) {\n        this.modal = false;\n      } else {\n        this.confirmChanges().then((result) => {\n          if (result.value) {\n            this.submitForm();\n          } else {\n            this.modal = false;\n          }\n        });\n      }\n    },\n    async getCategory() {\n      try {\n        this.loading = true;\n        const { data } = await this.axios.get(\n          \"admin/categories/\" + this.categoryId\n        );\n        this.form = data;\n        setTimeout(() => {\n          this.saved = true;\n        }, 200);\n      } catch (e) {\n        console.log(e);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async submitForm() {\n      try {\n        this.submitting = true;\n        this.$v.$touch();\n        if (this.$v.$anyError) {\n          this.toast({ type: 'danger', message: 'validationError' });\n          return false;\n        }\n\n        await this.axios.patch(\n          \"admin/categories/\" + this.categoryId,\n          this.form\n        );\n        this.$emit(\"refreshList\");\n        this.saved = true;\n        this.modal = false;\n\n        this.toast({ message: 'updateSuccess', item: 'category' });\n      } catch (e) {\n        this.toast({ type: \"danger\", message: \"updateError\", item: \"category\" });\n        console.log(e);\n      } finally {\n        this.submitting = false;\n      }\n    },\n  },\n  watch: {\n    modal(nv) {\n      if (nv) {\n        this.getCategory();\n        this.$v.$reset();\n      }\n    },\n    form: {\n      handler() {\n        this.saved = false;\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditCategory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditCategory.vue?vue&type=template&id=32325c46&\"\nimport script from \"./EditCategory.vue?vue&type=script&lang=js&\"\nexport * from \"./EditCategory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <b-row>\r\n    <b-col md=\"7\">\r\n      <b-card :title=\"$t('project.categoryList')\">\r\n        <b-table-simple\r\n          borderless\r\n          :responsive=\"true\"\r\n          table-class=\"table-vertical-center\"\r\n        >\r\n          <b-thead>\r\n            <b-tr>\r\n              <b-th>{{ $t('project.category') }}</b-th>\r\n              <b-th>{{ $t('project.transaction') }}</b-th>\r\n            </b-tr>\r\n          </b-thead>\r\n          <b-tbody>\r\n            <template v-if=\"!loading\">\r\n              <b-tr v-for=\"(item, i) in categories\" :key=\"i\">\r\n                <b-td>\r\n                  {{ item.name }}\r\n                </b-td>\r\n                <b-td>\r\n                  <edit-category\r\n                    :category-id=\"item.id\"\r\n                    @refreshList=\"getCategories\"\r\n                  />\r\n                  <b-button\r\n                    @click=\"deleteCategory(item.id)\"\r\n                    size=\"xs\"\r\n                    variant=\"light-danger\"\r\n                    class=\"btn-icon\"\r\n                  >\r\n                    <span class=\"svg-icon\">\r\n                      <inline-svg src=\"/media/svg/icons/General/Trash.svg\" />\r\n                    </span>\r\n                  </b-button>\r\n                </b-td>\r\n              </b-tr>\r\n            </template>\r\n            <tr v-if=\"categories.length === 0 && !loading\" class=\"text-center\">\r\n              <td colspan=\"2\">{{ $t('project.noRecord') }}</td>\r\n            </tr>\r\n            <tr v-if=\"loading\" class=\"text-center\">\r\n              <td colspan=\"2\"><b-spinner variant=\"primary\" /></td>\r\n            </tr>\r\n          </b-tbody>\r\n        </b-table-simple>\r\n        <b-pagination\r\n          v-if=\"pageSize < totalRows\"\r\n          v-model=\"pageNumber\"\r\n          :total-rows=\"totalRows\"\r\n          :per-page=\"pageSize\"\r\n        ></b-pagination>\r\n      </b-card>\r\n    </b-col>\r\n    <b-col md=\"5\">\r\n      <form-wrapper :validator=\"$v.createForm\">\r\n        <b-card :title=\"$t('project.addCategory')\">\r\n          <b-row>\r\n            <form-group name=\"name\" xs=\"12\" :label=\"$t('project.categoryName')\">\r\n              <b-input\r\n                slot-scope=\"{ attrs, listeners }\"\r\n                v-bind=\"attrs\"\r\n                v-on=\"listeners\"\r\n                v-model=\"createForm.name\"\r\n              />\r\n            </form-group>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col>\r\n              <b-button @click=\"addCategory\">{{ $t('project.add') }}</b-button>\r\n            </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </form-wrapper>\r\n    </b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\nimport { SET_BREADCRUMB } from \"@/core/services/store/breadcrumbs.module\";\r\nimport { required } from \"vuelidate/lib/validators\";\r\nimport EditCategory from \"./EditCategory\";\r\n\r\nexport default {\r\n  components: {\r\n    EditCategory,\r\n  },\r\n  validations: {\r\n    createForm: {\r\n      name: { required },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      createForm: {\r\n        name: \"\",\r\n      },\r\n      categories: [],\r\n      loading: true,\r\n      pageSize: 10,\r\n      pageNumber: 1,\r\n      totalRows: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch(SET_BREADCRUMB, [\r\n      { title: 'project.adminPanel' },\r\n      { title: 'project.categoryTransactions' }\r\n    ]);\r\n\r\n    this.getCategories();\r\n  },\r\n  methods: {\r\n    async getCategories() {\r\n      try {\r\n        this.loading = true;\r\n        const { data } = await this.axios.get(\"admin/categories\", {\r\n          params: { ...this.requestQuery },\r\n        });\r\n        this.categories = data.rows;\r\n        this.totalRows = data.count;\r\n      } catch (e) {\r\n        console.log(e);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    async deleteCategory(id) {\r\n      try {\r\n        const { isConfirmed } = await this.confirmDelete();\r\n\r\n        if (!isConfirmed) return false;\r\n\r\n        await this.axios.delete(\"admin/categories/\" + id);\r\n        this.toast({ message: 'deleteSuccess', item: 'category' });\r\n        this.getCategories();\r\n      } catch (e) {\r\n        this.toast({ type: \"danger\", message: \"deleteError\", item: \"category\" });\r\n        console.log(e);\r\n      }\r\n    },\r\n\r\n    async addCategory() {\r\n      try {\r\n        this.$v.createForm.$touch();\r\n        if (this.$v.createForm.$anyError) {\r\n          this.toast({ type: 'danger', message: 'validationError' });\r\n          return false;\r\n        }\r\n        await this.axios.post(\"admin/categories\", this.createForm);\r\n\r\n        this.createForm = {\r\n          name: \"\",\r\n        };\r\n        this.$v.createForm.$reset();\r\n\r\n        this.toast({ message: 'createSuccess', item: 'category' });\r\n        this.getCategories();\r\n      } catch (e) {\r\n        this.toast({ type: \"danger\", message: \"createError\", item: \"category\" });\r\n        console.log(e);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    requestQuery() {\r\n      return {\r\n        pageSize: this.pageSize,\r\n        pageNumber: this.pageNumber,\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    requestQuery() {\r\n      this.getCategories();\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryList.vue?vue&type=template&id=11ce260d&\"\nimport script from \"./CategoryList.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
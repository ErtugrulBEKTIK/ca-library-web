(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1d36"],{"7ba6":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",{attrs:{md:"7"}},[r("b-card",{attrs:{title:t.$t("project.authorList")}},[r("b-table-simple",{attrs:{borderless:"",responsive:!0,"table-class":"table-vertical-center"}},[r("b-thead",[r("b-tr",[r("b-th",[t._v(t._s(t.$t("project.author")))]),r("b-th",[t._v(t._s(t.$t("project.description")))]),r("b-th",[t._v(t._s(t.$t("project.transaction")))])],1)],1),r("b-tbody",[t.loading?t._e():t._l(t.authors,(function(e,a){return r("b-tr",{key:a},[r("b-td",[t._v(" "+t._s(e.fullName)+" ")]),r("b-td",[t._v(" "+t._s(e.description)+" ")]),r("b-td",[r("edit-author",{attrs:{"author-id":e.id},on:{refreshList:t.getAuthors}}),r("b-button",{staticClass:"btn-icon",attrs:{size:"xs",variant:"light-danger"},on:{click:function(r){return t.deleteAuthor(e.id)}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/General/Trash.svg"}})],1)])],1)],1)})),0!==t.authors.length||t.loading?t._e():r("tr",{staticClass:"text-center"},[r("td",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("project.noRecord")))])]),t.loading?r("tr",{staticClass:"text-center"},[r("td",{attrs:{colspan:"3"}},[r("b-spinner",{attrs:{variant:"primary"}})],1)]):t._e()],2)],1),t.pageSize<t.totalRows?r("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.pageSize},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}}):t._e()],1)],1),r("b-col",{attrs:{md:"5"}},[r("form-wrapper",{attrs:{validator:t.$v.createForm}},[r("b-card",{attrs:{title:t.$t("project.addAuthor")}},[r("b-row",[r("form-group",{attrs:{name:"fullName",xs:"12",label:t.$t("project.authorName")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs,n=e.listeners;return r("b-input",t._g(t._b({model:{value:t.createForm.fullName,callback:function(e){t.$set(t.createForm,"fullName",e)},expression:"createForm.fullName"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("form-group",{attrs:{name:"description",xs:"12",label:t.$t("project.description")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs,n=e.listeners;return r("b-input",t._g(t._b({model:{value:t.createForm.description,callback:function(e){t.$set(t.createForm,"description",e)},expression:"createForm.description"}},"b-input",a,!1),n))}}])})],1),r("b-row",[r("b-col",[r("b-button",{on:{click:t.addAuthor}},[t._v(t._s(t.$t("project.add")))])],1)],1)],1)],1)],1)],1)},n=[],o=r("5530"),s=(r("96cf"),r("1da1")),i=r("0bce"),c=r("b5ae"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"inline"}},[r("b-button",{staticClass:"btn-icon mr-2",attrs:{size:"xs",variant:"light-primary"},on:{click:function(e){t.modal=!0}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/icons/Design/Edit.svg"}})],1)]),r("b-modal",{attrs:{title:t.$t("common.edit"),size:"md","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:t.onClose},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t.loading?t._e():r("form-wrapper",{staticClass:"av-tooltip tooltip-right-top",attrs:{validator:t.$v.form}},[r("b-row",[r("form-group",{attrs:{name:"fullName",xs:"12",label:t.$t("project.authorName")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs,n=e.listeners;return r("b-input",t._g(t._b({model:{value:t.form.fullName,callback:function(e){t.$set(t.form,"fullName",e)},expression:"form.fullName"}},"b-input",a,!1),n))}}],null,!1,4033622537)})],1),r("b-row",[r("form-group",{attrs:{name:"description",xs:"12",label:t.$t("project.description")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs,n=e.listeners;return r("b-input",t._g(t._b({model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}},"b-input",a,!1),n))}}],null,!1,589750171)})],1)],1),t.loading?r("div",{staticClass:"text-center"},[r("b-spinner",{attrs:{variant:"primary"}})],1):t._e(),r("template",{slot:"modal-footer"},[r("b-button",{attrs:{variant:"light"},on:{click:t.onClose}},[t._v(" "+t._s(t.$t("common.cancel"))+" ")]),r("b-button",{staticClass:"mr-1",attrs:{variant:"primary",disabled:t.$v.$anyError||t.saved||t.submitting},on:{click:t.submitForm}},[t._v(" "+t._s(t.$t("common.save"))+" "),t.submitting?r("b-spinner",{attrs:{small:""}}):t._e()],1)],1)],2)],1)},l=[],m={props:["authorId"],validations:{form:{fullName:{required:c["required"]},description:{}}},data:function(){return{modal:!1,countries:[],form:{fullName:"",description:""},loading:!0,submitting:!1,saved:!0}},methods:{onClose:function(t){var e=this;t.preventDefault(),this.saved?this.modal=!1:this.confirmChanges().then((function(t){t.value?e.submitForm():e.modal=!1}))},getAuthor:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.axios.get("admin/authors/"+t.authorId);case 4:r=e.sent,a=r.data,t.form=a,setTimeout((function(){t.saved=!0}),200),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()},submitForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.submitting=!0,t.$v.$touch(),!t.$v.$anyError){e.next=6;break}return t.toast({type:"danger",message:"validationError"}),e.abrupt("return",!1);case 6:return e.next=8,t.axios.patch("admin/authors/"+t.authorId,t.form);case 8:t.$emit("refreshList"),t.saved=!0,t.modal=!1,t.toast({message:"updateSuccess",item:"author"}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),t.toast({type:"danger",message:"updateError",item:"author"}),console.log(e.t0);case 18:return e.prev=18,t.submitting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})))()}},watch:{modal:function(t){t&&(this.getAuthor(),this.$v.$reset())},form:{handler:function(){this.saved=!1},deep:!0}}},d=m,p=r("2877"),b=Object(p["a"])(d,u,l,!1,null,null,null),h=b.exports,f={components:{EditAuthor:h},validations:{createForm:{fullName:{required:c["required"]}}},data:function(){return{createForm:{fullName:"",description:""},authors:[],loading:!0,pageSize:10,pageNumber:1,totalRows:null}},mounted:function(){this.$store.dispatch(i["a"],[{title:"project.adminPanel"},{title:"project.authorTransactions"}]),this.getAuthors()},methods:{getAuthors:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.axios.get("admin/authors",{params:Object(o["a"])({},t.requestQuery)});case 4:r=e.sent,a=r.data,t.authors=a.rows,t.totalRows=a.count,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()},deleteAuthor:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.confirmDelete();case 3:if(a=r.sent,n=a.isConfirmed,n){r.next=7;break}return r.abrupt("return",!1);case 7:return r.next=9,e.axios.delete("admin/authors/"+t);case 9:e.toast({message:"deleteSuccess",item:"author"}),e.getAuthors(),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),e.toast({type:"danger",message:"deleteError",item:"author"}),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()},addAuthor:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.$v.createForm.$touch(),!t.$v.createForm.$anyError){e.next=5;break}return t.toast({type:"danger",message:"validationError"}),e.abrupt("return",!1);case 5:return e.next=7,t.axios.post("admin/authors",t.createForm);case 7:t.createForm={fullName:"",description:""},t.$v.createForm.$reset(),t.toast({message:"createSuccess",item:"author"}),t.getAuthors(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),t.toast({type:"danger",message:"createError",item:"author"}),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}},computed:{requestQuery:function(){return{pageSize:this.pageSize,pageNumber:this.pageNumber}}},watch:{requestQuery:function(){this.getAuthors()}}},v=f,g=Object(p["a"])(v,a,n,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0e1d36.58c32f1f.js.map